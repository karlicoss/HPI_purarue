#!/bin/bash

BACKUP_DIR="${HOME}/data/github/ghexport"
GHDIR="${REPOS}/ghexport"

[[ -d "$GHDIR" ]] || {
	echo "${GHDIR} does not exist"
	exit 1
}

wait-for-internet

# expires every 90 days
evry 45 days -ghexport && {
	arctree -r 3 "${BACKUP_DIR}/{utcnow}.json" -- python3 "${GHDIR}/export.py" --secrets "${XDG_CONFIG_HOME}/my/my/config/gh_secret_token.py"
}
